<!--
  ~ KKuTu-Web (https://github.com/horyu1234/KKuTu-Web)
  ~ Copyright (C) 2021. horyu1234(admin@horyu.me)
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- @formatter:off -->
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PBFPQKD');</script>
    <!-- End Google Tag Manager -->
    <!-- @formatter:on -->
    <title th:text="#{title}"></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <script
            src="https://browser.sentry-cdn.com/6.0.0/bundle.min.js"
            integrity="sha384-NgJoCNCq1mmUTPa0pdGvQap/A1iALF8fTOkhj269GOr6K4b/fIVG5K+aUNKD/aqP"
            crossorigin="anonymous"
    ></script>
    <script
            src="https://browser.sentry-cdn.com/6.0.0/bundle.tracing.min.js"
            integrity="sha384-qZ/lkPTGmlJ1yNA9wiF4jyKK/g9t3Dvbd8iJtape2uINHwWGhJuNCvidIQNOxKHU"
            crossorigin="anonymous"
    ></script>

    <script type="text/javascript" th:inline="javascript">
        var loginProfile = /*[[${profile}]]*/'';

        if (window.hasOwnProperty('Sentry')) {
            Sentry.init({
                dsn: "https://40af3053aa4c4622a1af2d13c08a7fdf@o508489.ingest.sentry.io/5601078",
                environment: "production", // production
                release: "kkutu-io-frontend@1.0.5b",
                integrations: [new Sentry.Integrations.BrowserTracing()],

                // We recommend adjusting this value in production, or using tracesSampler
                // for finer control
                tracesSampleRate: 1.0,
            });

            if (loginProfile !== 'null') {
                var loginProfileJson = JSON.parse(loginProfile);
                Sentry.setUser({
                    id: loginProfileJson.id,
                    username: loginProfileJson.title,
                    ip_address: '{{auto}}'
                });
            }
        } else {
            console.warn('AdBlock 등의 원인으로 오류 로그 수집기를 로드하지 못했습니다.');
        }

        function getObject(v, i) {
            Object.defineProperty(v, i, {value: v[i], writable: false});
        }

        getObject(window.WebSocket, "send");
        getObject(window.WebSocket, "onmessage");
        getObject(window, "WebSocket");
    </script>
    <link rel="canonical" th:href="@{/}">
    <meta name="description" th:content="#{meta.description}">
    <meta name="keywords" th:content="#{meta.keywords}">

    <meta property="og:image" th:content="#{og.image}">
    <meta property="og:url" th:content="@{/}">
    <meta property="og:title" th:content="#{og.title}">
    <meta property="og:description" th:content="#{og.description}">

    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" th:href="@{/css/expl.css}"/>

    <script th:inline="javascript">
        var Messages = /*[[${messages}]]*/{};
        var GoodDetails = /*[[${goodDetails}]]*/{};
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <script type="text/javascript" th:src="@{/js/global.js}"></script>

    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>
    <script async src="//t1.daumcdn.net/kas/static/ba.min.js" type="text/javascript"></script>
</head>
<body style="min-width: 640px;">
<!-- @formatter:off -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe height="0"
                  src="https://www.googletagmanager.com/ns.html?id=GTM-PBFPQKD" style="display:none;visibility:hidden" width="0"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<!-- @formatter:on -->
<div id="Top" th:unless="${#strings.startsWith(viewName, 'view/login')}">
    <div th:include="menu" th:remove="tag"></div>
    <div id="global-notice">
        <div id="gn-content" th:include="../static/global_notice"></div>
        <div class="expl" style="width: initial;">
            <h5 th:text="#{global-notice.close}"></h5>
        </div>
    </div>
</div>

<div id="Jungle">
    <span id="mobile" th:text="${mobile}"></span>
    <img id="Background" src="https://cdn.jsdelivr.net/npm/kkutuio@latest/img/bg/def.png">

    <th:block th:if="${viewName == 'view/kkutu/kkutu' || viewName == 'view/kkutu/m_kkutu'}">
        <div id="Yell"></div>
        <div id="Loading" th:text="#{kkutu.loading}"></div>
        <div id="Balloons" style="position: absolute;"></div>
    </th:block>
</div>

<div id="Middle" th:include="${viewName}"></div>

<div id="Bottom" th:unless="${#strings.startsWith(viewName, 'view/login')}">
    <div class="bottom-legal" th:utext="#{legal.license}"></div>
    <div class="bottom-legal" th:utext="#{legal.dictionary}"></div>
    <div class="bottom-legal" th:utext="#{legal.copyright}"></div>
    <div style="float: left; width: 100%; margin: 10px 0;"></div>
</div>
</body>
</html>